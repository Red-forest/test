var op=function(n){var e=$(n),s=e.attr("class");s.indexOf("span-mark-1")>-1?(e.removeClass("span-mark-1").addClass("span-mark-2"),e.parent().children("ul").slideUp(50)):s.indexOf("span-mark-2")>-1&&(e.removeClass("span-mark-2").addClass("span-mark-1"),e.parent().children("ul").slideDown(50))},change=function(n){var e=$(n),s=parseInt(e.css("width")),a=e.offset(),t=$("#main").offset(),i=a.left-t.left+s+"px",r=a.top-t.top+"px";$("#menu").css({display:"block",left:i,top:r}).attr("m",e.attr("id")),setTimeout("miss()",2e3),console.log("a"),$("#main").dblclick(function(){$("#menu").removeAttr("style")})};$("#menu").mouseenter(function(){$("#menu").addClass("n")}),$("#menu").mouseleave(function(){$("#menu").removeClass("n"),$("#menu").removeAttr("style")});var miss=function(){$("#menu").hasClass("n")?setTimeout("$('#menu').removeAttr('style');",5e3):setTimeout("$('#menu').removeAttr('style');",100)},add=function(){$("#menu-span-1").click(function(){var n=$("#menu").attr("m"),e=$("#"+n).siblings().attr("class");e.indexOf("span-mark-1")>-1?$('<ul class="tree-ul-2"><li><span class="span-mark-3"></span><span class="span-word ab" id="112">目录112</span></li></ul>').insertAfter($("#"+n)):e.indexOf("span-mark-2")>-1?$('<li><span class="span-mark-2 tt op"></span><span class="span-word ab" id="117">目录117</span></li>').insertAfter($("#"+n).parent()):($("#"+n).siblings().attr("class","span-mark-1"),$('<ul class="tree-ul-2"><li><span class="span-mark-3"></span><span class="span-word ab" id="117">目录119</span></li></ul>').insertAfter($("#"+n))),$("#"+n).siblings().unbind().bind("click",function(){op(this)}),$(".ab").unbind().bind("mouseover",function(){change(this)}),$(".tt").unbind().bind("click",function(){op(this)})})},rename=function(){$("#menu-span-2").click(function(){var n=$("#menu").attr("m"),e=parseInt($("#"+n).css("width"))+60,s=$("#"+n).offset(),a=$("#main").offset(),t=s.left-a.left+"px",i=s.top-a.top-6+"px";$("#menu").css("display:none"),$("#rename").css({display:"block",left:t,top:i,width:e}).attr("value",$("#"+n).text()).select(),$(function(){document.onkeydown=function(n){var e=n||window.event;e&&13==e.keyCode&&$("#rename").blur()}}),$("#rename").blur(function(){var e=$("#rename").val();""!=e&&$("#"+n).text(e),$("#rename").removeAttr("style")}),$("#menu").removeAttr("style")})},del=function(){$("#menu-span-3").click(function(){var n=$("#menu").attr("m"),e=$("#"+n).parent().siblings().text();""!=e?($("#"+n).parent().remove(),$("#menu").css({display:"none"})):($("#"+n).parent().parent().remove(),$("#menu").css({display:"none"}))})},ab=function(){setTimeout("(change(this));",10),$(".ab").mouseover(change(this))};$(".op").click(function(){op(this)}),$(".span-word").mouseover(function(){change(this)}),add(),rename(),del();